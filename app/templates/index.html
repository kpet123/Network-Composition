<!DOCTYPE html>
<head>
    <script src="http://code.jquery.com/jquery-3.3.1.min.js"></script>
</head>

<body>

		<p id="demo"></p>

		<div>
			<button id="save">Submit</button>		
		</div>


		<script>

			var data = {{data|tojson}};
			//testing
			document.getElementById("demo").innerHTML = 5 + 6;
			//define function
			var pass_eg = function(data) {
				 var obj = { name: "John", age: 30, city: "New York" };
				    jQuery.ajax({
					type: "POST",
					url: "/pass_eg",    
					dataType : "json",
					contentType: "application/json; charset=utf-8",
					data : JSON.stringify(obj),
					success: function(result){
						var all_data = result["data"]
						data = all_data
					},  
			   	error: function(request, status, error){
						console.log("Error");
						console.log(request)
						console.log(status)
						console.log(error)
					}   
				}); 
			}
			//interactivity

				$(document).ready(function(){
					console.log("in custom_script document ready");
					$("#save").click(function() {
						pass_eg(data)


					})
				})
		</script>



		<div>
			<div>Data is </div>
			<div >{{data}}</div>
		<div>
		<script type="module">

		// Load the Observable runtime and inspector.
		import {Runtime, Inspector} from "https://cdn.jsdelivr.net/npm/@observablehq/runtime@4/dist/runtime.js";

		// Your notebook, compiled as an ES module.
		import notebook from "https://api.observablehq.com/d/660ed25f1beeb456.js?v=3";

		// Load the notebook, observing its cells with a default Inspector
		// that simply renders the value of each cell into the provided DOM node.
		new Runtime().module(notebook, Inspector.into(document.body));



		// Do this to just show the chart, need to create div with id="chart"
		// new Runtime().module(notebook, name => {
		//  if (name === "chart") {
		//    return new Inspector(document.querySelector("#chart"));
		//  }
		// });


		</script>


		


</body>

</html>
