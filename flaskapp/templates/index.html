<!DOCTYPE html>
<head>
    <script src="http://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script src="/static/interaction.js"></script>
    <script src="/static/observable.js" type="module"></script>
</head>
<style>
div.scroll_div {
  background-color: lightblue;
  width: 600px;
  height: 110px;
  overflow: scroll;


}

div.gen_info {
background-color: #78b3e0;

}

p.setting {
   background-color: lightgreen;
}
</style>
<body>


<!--To display current json string, add {{data}} in the div  -->
<!-- currently used network. This is just here for debugging purposes-->


<h1> Music Network Visualization </h1>

<h2> Step 1: Upload the score you would like to convert into a graph! 
     The default graph is a reharmonized version of <i>Fantasie of Solo
     Flute No. 1 </i> by G. F. Telemann</h2>
<h3> Accepts files with the extension
    <i>.xml</i>, <i>.mxl</i>, <i>.mid</i> and <i>.musicxml</i>
</h3>

<div class="gen_info">

<!-- Code adapted from 
https://stackoverflow.com/questions/18334717/how-to-upload-a-file-using-an-ajax-call-in-flask
 
--!>
    <form id="upload-file" method="post" enctype="multipart/form-data">
        <fieldset>
            <label for="file">Select a file</label>
            <input name="file" type="file">
        </fieldset>
        <fieldset>
            <button id="upload-file-btn" type="button">Upload</button>
        </fieldset>
    </form>
</div>

<h2> Step 2: Enter Information about the piece you uploaded (you can ignore
     this if using the default data.) The key of the piece is used for 
     Roman Numeral Harmonic Analysis - right now we don't support key 
     changes so just pick one :). To create separate subgraphs for different
     sections of the piece, end the measure and note offset of the position 
     you want that break to be.   </h2>
<div class="gen_info">
	<form id="changeparams"  method = "post" 
			enctype="multipart/form-data">
  	  <fieldset> 
            <label for="key">


                Enter Key of piece being processed. (for pieces in a minor 
                key, enter the relative major):
            </label>
            <input type="text" id="key" name="key">
            (e.g. <i>A</i>  )          
            <br>
            <br>

            <label for="grouping">
                Enter New Measure Offsets for Forced Grouping graph 
                as measure numbers separated by spaces:
            </label>
            <input type="text" id="grouping" name="grouping" >
            ( e.g. <i>1 10 20 </i>) 
            <br>
            <br>
            <label for="offsets">
                Enter New New Note Offsets for Roman Numeral Forced 
                Grouping Graph as note offsets separated by spaced:
            </label>
            <input type="text" id="offsets" name="offsets" >
            (e.g. <i>1  35 50 90</i>)
           <br>
          
      </fieldset>

      <fieldset>
 	    	 <button id = "update-params-btn" type="button">Submit</button>
      </fieldset>
	</form>
</div>

<br>
<br>
<h2>
Click the below button to change to a different encoding scheme
</h2>

<div class="gen_info">
    <fieldset>
        <button id="grouped">
            Display Forced Grouping Graph Encoding
        </button>		
        <button id="basic">
            Display Basic Graph Encoding
        </button>
        <button id="RN">
            Diplay Roman Numeral Graph Encoding 
        </button>
        <button id="grouped_RN">
            Display Grouped Roman Numeral Graph Encoding
        </button>
    </fieldset>
</div>

<h2>
Click the below button to change visualized communities
</h2>

<div class="gen_info">
    <fieldset>
	    <button id="infomap_vis">Change to Infomap</button>		
        <button id="lpm_vis">Change to Label Propagation</button>
        <button id="louvain_vis">Change to Louvain</button>
        <button id="hlc_vis">Change to Hierarchical Links</button>
    </fieldset>
</div>


<h2>
Generate Composition from a random walk of this graph. To create the random walk, choose an option below and click "Submit"
</h2>
<div class = "gen_info">
    <form >
      <fieldset>
      <label for="walk-encoding-options">
            Choose Rhythm of Generated Composition:
      </label>
      <select id="walk-encoding-options" name="walk-encoding-options">
        <option value="ignore-comm">Ignore Communities</option>
        <option value="consider-comm">Consider Communities</option>

      </select>
      <button id = "change-walk-btn" type="button">Submit</button>
      </fieldset>
    </form>
</div>
<!-- Embedded Observable --!>
<h2> Press to Start Walk </h2>
<p class="setting">
 Current Setting is :  {{setting}}
</p>
<div>
    <span id="start_walk"></span>
</div>
<div id="chart"></div>
<h2> Visualization Parameters </h2>
<div id="radius"></div>
<div id="attraction"></div>
<div id="distance"></div>
<h2> Audio Playback Parameters </h2>
<div id="speed"></div>
<div id="wavetype"></div>
<h2> Change Edge Weight</h2>
<div class="gen_info">
    Chosen Edge : 
    <div>
        <p id="chosen_source"></p> TO  <p id="chosen_target"></p>
    </div>
    with weight <p id="cur_weight"></p>
    <form>

            <input type="text" id="new_weight" name="new_weight" >
            ( e.g. <i>6</i>)
        <button id = "change-weight-btn" type="button">Submit</button>
    </form>
</div>
<div>
<h2> Data and Random Walk Explorer </h2>
<div id="data"></div>
<div id="random_walk"></div>


<script>
	//These variables are instantiated in Flask and can be 
	//changed through Observable or directly through html

	
	var data = {{data|tojson}}//corresponds Observable cell
	var walk = {{walk|tojson}}//corresponds to Observable
	var key = {{key|tojson}}
	var grouping = {{grouping|tojson}}
	var offsets = {{offsets|tojson}}
    var setting = {{setting|tojson}}
	//any information coming in needs to be converted to json 
	//(to my knowlege) 
    console.log("In definiing area")
    console.log(walk)
</script>




</body>

</html>
